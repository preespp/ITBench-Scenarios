---
metadata:
  version: "v1"
fault:
  - entity:
      name: remove-resource-limits-cart
      group_id: cart-pod-1
      kind: Pod
    name: exhaust-node-resources
    condition: Node resource exhaustion via removed CPU/memory limits
    category: Chaos
    fault_mechanism: custom
alerts:
  - id: NodeMemoryHighUtilization
    group_id: node-1
    metadata:
      description: The node running the cart pod will have much of its memory resources consumed.
groups:
  - id: node-1
    kind: Node
    filter:
      - ""
    namespace: ""
  - id: cart-service-1
    kind: Service
    filter:
      - cart\b
    namespace: otel-demo
  - id: cart-pod-1
    kind: Pod
    filter:
      - cart-.*
    namespace: otel-demo
    root_cause: true
aliases:
  - - cart-service-1
    - cart-pod-1
propagations:
  - source: remove-resource-limits-cart
    target: cart-pod-1
    condition: Removing CPU/memory limits allows pods to consume more resources, potentially causing node exhaustion
    effect: Latency may increase
recommended_actions:
  - solution:
      id: tune_resources
      actions:
        - Restore CPU/memory limits
        - Increase requests/limits as needed
        - Consider autoscaling
